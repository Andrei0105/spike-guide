<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="../img/favicon.ico">

    
    <title>Troubleshooting - Spike + Loop Wiki</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link href="../css/highlight.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">Spike + Loop Wiki</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../faq/">FAQ</a>
                    </li>
                
                
                
                    <li >
                        <a href="../calibration/">Calibration</a>
                    </li>
                
                
                
                    <li >
                        <a href="../about/">The Spike Branches</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Troubleshooting</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Build Your Own Spike Branch <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../diy/getting-started/">Getting Started</a>
</li>

                        
                            
<li >
    <a href="../diy/build/">Build</a>
</li>

                        
                            
<li >
    <a href="../diy/resources/">Resources</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../about/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../diy/getting-started/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#loop-not-getting-spike-data-try-some-of-these-fixes">Loop not getting Spike data ? Try some of these fixes.</a></li>
            <li class="second-level"><a href="#make-sure-that-spike-is-active-in-the-background">Make sure that Spike is active in the background</a></li>
                
            <li class="second-level"><a href="#spike-is-updating-but-loop-isnt">Spike is updating, but Loop isn't</a></li>
                
            <li class="second-level"><a href="#delayed-cgm-data-but-green-loop">Delayed CGM data, but green loop</a></li>
                
            <li class="second-level"><a href="#still-not-working">Still not working ?</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="loop-not-getting-spike-data-try-some-of-these-fixes">Loop not getting Spike data ? Try some of these fixes.</h1>
<blockquote>
<p>Note that <strong><em>you will not get Spike readings as expected when using a simulator pump</em></strong> in Loop. In order for Loop to pull Spike data in the expected manner, <strong><em>a physical pump needs to be paired with the Loop app</em></strong>.
If you're still waiting for your RileyLink to arrive and have Spike paired with Health at the moment in order to get some data into Loop, remember to <strong><em>disable Health capabilities in Spike</em></strong> when connecting your pump to Loop for the first time.
</p>
</blockquote>
<h3 id="make-sure-that-spike-is-active-in-the-background">Make sure that Spike is active in the background</h3>
<p>The app must be open and active in order to get readings, and thus to send them to Loop as well. If you're having connectivity issues <em>within Spike</em>, try :</p>
<ul>
<li>
<p><strong>Changing the suspension prevention settings of Spike</strong>. In <code>settings &gt; advanced &gt; user defined</code>, you'll be able to select your mode. Read the instructions in that panel to determine which setting you should start with, as this changes per CGM.</p>
</li>
<li>
<p><strong>iCloud settings</strong>. When the phone is plugged in, on WiFi, and the screen is off, this is when iCloud backs up your phone. This setting is turned on by default. This will sometimes disrupt Spike getting readings. The solution can either be to not plug your phone in overnight, or to disable this setting by clicking on your account from within the phone's settings, scroll to the bottom to select the phone you're using, and clicking on the iCloud settings.</p>
</li>
<li>
<p><strong>Screen time</strong>. You may have a setting enabled in this menu that is forcing Spike to quit, be it during the night or the day. This menu can be found under "screen time" (I think it's called that, my phone isn't in English, sorry... it's the option underneath "Do not disturb", the purple icon with the hourglass).</p>
</li>
<li>
<p><strong>Background app refresh</strong>. Under <code>general &gt; background app refresh</code>, you can make sure that Spike is enabled. Again, this may be labeled differently on a phone in English... It's the 8th option on the screen.</p>
</li>
</ul>
<h3 id="spike-is-updating-but-loop-isnt">Spike is updating, but Loop isn't</h3>
<p>More often than not, the issue lies in Apple Health. Your settings <em>must</em> be :</p>
<ul>
<li>
<p>Loop : has full monopoly on reading and writing <em>all data</em></p>
</li>
<li>
<p>Spike : has <em>zero</em> abilities to read or write. You can also fully disable Spike's access to Health by going into its <code>settings &gt; share</code>, and disabling Health Kit</p>
</li>
</ul>
<p>See the <a href="https://loopkit.github.io/loopdocs/build/health/">LoopDocs section on Health permissions</a> for more.</p>
<p>If your Health settings are correct, try :</p>
<ul>
<li>
<p>Ensure that your <strong>Spike credentials are entered</strong>. Upon setting Spike as your CGM source after tapping <code>Add CGM</code> in Loop's settings, you will be prompted for a username and password. These are bogus credentials that can be anything you wish. For example, mine are "username" and "password".</p>
</li>
<li>
<p><strong>Enable the HTTP internal server in Spike</strong>. This can be found in Spike, under  <code>settings &gt; integration</code>.</p>
</li>
<li>
<p><strong>Delete Spike as your CGM source in Loop</strong>, then when reselecting Spike, delete the credentials and enter new ones. Changing this up could knock things back into place.</p>
</li>
<li>
<p><strong>A simple restart</strong>. Close both Spike and Loop from the app switcher, turn the phone off and back on again, then reopen Spike and Loop in that order.</p>
</li>
</ul>
<h3 id="delayed-cgm-data-but-green-loop">Delayed CGM data, but green loop</h3>
<p>Because Spike and Loop's internal clocks aren't perfectly synced, it was not uncommon to get into a spot of looping off of 10 minute old data. However, since October 2019 for dev branch and January 2020 for master branch, there is a fix integrated for this. If you are still experiencing a delay in data, try updating your Loop branch to the newest available version.</p>
<h3 id="still-not-working">Still not working ?</h3>
<p>You can try a soft reset of the phone, or even delete Loop completely off of the phone and load it back on if you're in a tight spot and absolutely nothing is working, as a last ditch effort. Before you do that though, double check that your Loop app is displaying the correct version of Loop : it should be the original Loop version name plus <code>-spike</code> on the end. With all these new releases coming out, it's not unheard of that people mix up the folders or projects in Xcode and accidentally deploy the wrong version.</p>
<p>Also, if you'd been previously using a different source - such as Dexcom Share - when you load a new version, Loop keeps all your old settings. This includes whichever CGM source you were using. You'll have to delete that CGM source in order to get Spike to show up as a CGM option.</p>
<p>If you're still stuck, remember to <a href="https://loopkit.github.io/loopdocs/troubleshooting/overview/">check the LoopDocs</a> for any other non-Spike-specific troubleshooting steps as well.</p></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>

        
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../js/refreshUpdatesRepo.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
